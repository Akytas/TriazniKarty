<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evidence osob</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display: block; margin-top: 10px; }
    input, select, textarea { width: 100%; padding: 5px; margin-top: 5px; }
    button { margin-top: 10px; padding: 10px; }
    .card { border: 1px solid #ccc; padding: 10px; margin-top: 10px; border-radius: 5px; }
    .figure-container { display: flex; justify-content: space-between; margin-top: 20px; }
    .figure { position: relative; }
    .clickable-area { position: absolute; cursor: pointer; opacity: 0.7; }
    .highlight { background-color: rgba(255, 0, 0, 0.5); }
  </style>
</head>
<body>
  <h1>Vyberte části těla na postavičkách</h1>

  <div style="position: relative; width: 800px; height: auto;">
    <img src="obrázky/posatvičky.png" alt="Postavičky" width="800">
    
    <!-- Klikatelné oblasti na pravé straně -->
    <div class="clickable-area" data-bodypart="pravá hlava" 
         style="position: absolute; top: 10px; left: 457.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="pravá hlava - vlevo" 
         style="position: absolute; top: 10px; left: 407.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="pravá hlava - vpravo" 
         style="position: absolute; top: 10px; left: 507.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <!-- Klikatelné oblasti na levé straně -->
    <div class="clickable-area" data-bodypart="levá hlava" 
         style="position: absolute; top: 10px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levá hlava - vlevo" 
         style="position: absolute; top: 10px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levá hlava - vpravo" 
         style="position: absolute; top: 10px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levý krk" 
         style="position: absolute; top: 30px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levý krk - vlevo" 
         style="position: absolute; top: 30px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levý krk - vpravo" 
         style="position: absolute; top: 30px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levé rameno" 
         style="position: absolute; top: 50px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levé rameno - vlevo" 
         style="position: absolute; top: 50px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levé rameno - vpravo" 
         style="position: absolute; top: 50px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levý loket" 
         style="position: absolute; top: 120px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levý loket - vlevo" 
         style="position: absolute; top: 120px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levý loket - vpravo" 
         style="position: absolute; top: 120px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levá ruka" 
         style="position: absolute; top: 190px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levá ruka - vlevo" 
         style="position: absolute; top: 190px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levá ruka - vpravo" 
         style="position: absolute; top: 190px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levý bok" 
         style="position: absolute; top: 260px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levý bok - vlevo" 
         style="position: absolute; top: 260px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levý bok - vpravo" 
         style="position: absolute; top: 260px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levé koleno" 
         style="position: absolute; top: 330px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levé koleno - vlevo" 
         style="position: absolute; top: 330px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levé koleno - vpravo" 
         style="position: absolute; top: 330px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levé lýtko" 
         style="position: absolute; top: 400px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levé lýtko - vlevo" 
         style="position: absolute; top: 400px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levé lýtko - vpravo" 
         style="position: absolute; top: 400px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  
    <div class="clickable-area" data-bodypart="levá noha" 
         style="position: absolute; top: 470px; left: 157.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levá noha - vlevo" 
         style="position: absolute; top: 470px; left: 107.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
    <div class="clickable-area" data-bodypart="levá noha - vpravo" 
         style="position: absolute; top: 470px; left: 207.8px; width: 50px; height: 50px;" 
         onclick="toggleArea(this)"></div>
  </div>

  <h2>Vybrané části těla</h2>
  <ul id="selectedParts"></ul>

  <h1>Evidence osob</h1>

  <form id="personForm">
    <label>Jméno: <input type="text" name="jmeno"></label>
    <label>Věk: <input type="number" name="vek"></label>
    <label>Odhadovaný věk: <input type="text" name="odhad_vek"></label>
    <label>Výška (cm): <input type="number" name="vyska"></label>
    <label>Pohlaví: 
      <select name="pohlavi">
        <option value="">-- nezadáno --</option>
        <option value="muž">Muž</option>
        <option value="žena">Žena</option>
      </select>
    </label>
    <label>Stav: 
      <select name="stav">
        <option value="">-- nezadáno --</option>
        <option value="ošetřen">Ošetřen</option>
        <option value="hospitalizován">Hospitalizován</option>
        <option value="převezen">Převezen</option>
        <option value="neznámý">Neznámý</option>
      </select>
    </label>
    <label>Popis tetování: <input type="text" name="popis_tetovani"></label>
    <label>Jiné identifikační znaky (např. jizvy): <textarea name="znaky"></textarea></label>
    <button type="submit">Uložit osobu</button>
  </form>

  <h2>Seznam osob</h2>
  <div id="personList"></div>
  <button id="loadMoreButton" onclick="loadPeople()">Načíst další</button>

  <script>
    let people = [];
    let loadedPeople = 0;
    const pageSize = 10;

    function loadPeople() {
      const storedPeople = JSON.parse(localStorage.getItem('people') || '[]');
      const nextBatch = storedPeople.slice(loadedPeople, loadedPeople + pageSize);
      people = people.concat(nextBatch);
      loadedPeople += nextBatch.length;
      displayPeople(nextBatch);
    }

    function savePeople() {
      localStorage.setItem('people', JSON.stringify(people));
    }

    function displayPeople(list = people) {
      const personList = document.getElementById('personList');
      personList.innerHTML = '';
      list.forEach((person, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <strong>${person.jmeno || 'Neznámé jméno'}</strong><br>
          Věk: ${person.vek || '?'} let<br>
          Odhadovaný věk: ${person.odhad_vek || '-'}<br>
          Výška: ${person.vyska || '?'} cm<br>
          Pohlaví: ${person.pohlavi || '?'}<br>
          Stav: ${person.stav || '?'}<br>
          Tetování: ${person.tetovani || '-'}<br>
          Popis tetování: ${person.popis_tetovani || '-'}<br>
          Znaky: ${person.znaky || '-'}<br>
        `;
        personList.appendChild(card);
      });
    }

    document.getElementById('personForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = new FormData(e.target);
      const newPerson = {};
      form.forEach((value, key) => newPerson[key] = value);
      newPerson.tetovani = getHighlightedAreas(); // add selected body parts as tattoos
      people.push(newPerson);
      savePeople();
      loadPeople();
      e.target.reset();
    });

    function getHighlightedAreas() {
      const highlightedAreas = document.querySelectorAll('.highlight');
      return Array.from(highlightedAreas).map(area => area.getAttribute('data-bodypart')).join(', ');
    }

    function toggleArea(area) {
      const selectedPartsList = document.getElementById('selectedParts');
      const selectedPart = area.getAttribute('data-bodypart');
      const isSelected = area.classList.contains('highlight');

      if (isSelected) {
        area.classList.remove('highlight');
        // Remove from selected list
        const item = document.querySelector(`#selectedParts li[data-bodypart="${selectedPart}"]`);
        if (item) item.remove();
      } else {
        area.classList.add('highlight');
        // Add to selected list
        const listItem = document.createElement('li');
        listItem.textContent = selectedPart;
        listItem.setAttribute('data-bodypart', selectedPart);
        selectedPartsList.appendChild(listItem);
      }
    }

    displayPeople();
  </script>
</body>
</html>